{% extends "admin/admin_base.html" %}
{% block content %}
<h3>Admin Activity Logs</h3>

<table class="table table-striped table-hover table-bordered">
    <thead>
        <tr>
            <th>Admin</th>
            <th>Action</th>
            <th>Target</th>
            <th>Details</th>
            <th>IP Address</th>
            <th>Timestamp</th>
        </tr>
    </thead>
    <tbody>
        {% for log in logs %}
        <tr>
            <td>{{ log[7] }}</td> <!-- admin_username -->
            <td>{{ log[2] }}</td> <!-- action -->
            <td>
                {% if log[3] and log[4] %}
                    {{ log[3] }}: {{ log[4] }}
                {% else %}
                    -
                {% endif %}
            </td>
            <td style="max-width: 300px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">
                {{ log[5] or '-' }}
            </td>
            <td>{{ log[6] }}</td> <!-- ip_address -->
            <td>{{ log[8] }}</td> <!-- timestamp -->
        </tr>
        {% else %}
        <tr>
            <td colspan="6" class="text-center">No logs available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div>
    <nav>
        <ul class="pagination">
            {% set total_pages = (total_logs // per_page) + (1 if total_logs % per_page > 0 else 0) %}
            {% for p in range(1, total_pages + 1) %}
            <li class="page-item {% if p == page %}active{% endif %}">
                <a class="page-link" href="{{ url_for('admin_bp.admin_logs', page=p) }}">{{ p }}</a>
            </li>
            {% endfor %}
        </ul>
    </nav>
</div>
{% endblock %}
